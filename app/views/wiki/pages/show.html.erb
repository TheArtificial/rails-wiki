<% content_for :page_title, @page.name %>

<% content_for :page_parents do %>
  <% if @page.parents.present? %>
    <div class="parents">
      <% @page.parents.each do |v| %>
        <%= link_to v.name, v unless v.nil? %> /
      <% end %>
    </div>
  <% end %>
<% end %>

<% content_for :page_title do %>
  <h1 class="page-title"><%= @page.name %></h1>
<% end %>

<div>
  <%== @page.html %>
</div>

<% content_for :page_meta do %>
  <span class="metadata">
    version <%= link_to @page.gollum_page.version_short, @page.history_url %>
  </span>
<% end %>

<%
  attachments = @page.attachments
  children = @page.children
  if attachments.present? || children.present?
    content_for :page_related do
%>
  <% if attachments.count > 0 %>
    <div class="attachments">
      <div class="section-title">Attachments</div>
      <ul>
      <% attachments.each do |a| %>
        <li><%= link_to a.name, a %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <% if children.count > 0 %>
    <div class="children">
      <div class="section-title">Children</div>
      <ul>
      <% children.each do |p| %>
        <li><%= link_to p.name, p %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
<%
    end
  end
%>

<% content_for :page_actions do %>
  <div class="btn-group">
    <%= link_to "Edit", edit_page_path(@page), {class: 'btn'} %>
  </div>
<% end %>
